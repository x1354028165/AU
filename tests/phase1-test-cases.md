# Phase 1 测试用例文档

**创建日期：** 2026-02-26
**对应计划：** docs/phase1-plan.md

---

## TC-01: 业主登录 — 查看全部电站

| 项目 | 内容 |
|---|---|
| **前置条件** | 打开 index.html |
| **操作步骤** | 1. 点击"业主登录"按钮 |
| **预期结果** | 跳转到 dashboard.html，侧边栏显示业主菜单（Portfolio, Assets, Lease, Health），内容区显示全部 4 个电站卡片 |
| **验证点** | localStorage.role === 'owner'；电站数量 === 4 |

---

## TC-02: 运维A登录 — 权限隔离

| 项目 | 内容 |
|---|---|
| **前置条件** | 打开 index.html |
| **操作步骤** | 1. 点击"运维商A登录"按钮 |
| **预期结果** | 跳转到 dashboard.html，侧边栏显示运维菜单（Dispatch, Assets, Logs），内容区仅显示 st_01（Sydney North BESS）和 st_03（Brisbane Energy Hub） |
| **验证点** | 不显示 st_02 和 st_04；无 Assign 按钮 |

---

## TC-03: 运维B登录 — 权限隔离

| 项目 | 内容 |
|---|---|
| **前置条件** | 打开 index.html |
| **操作步骤** | 1. 点击"运维商B登录"按钮 |
| **预期结果** | 内容区仅显示 st_02（Melbourne West Power） |
| **验证点** | 不显示 st_01、st_03、st_04；无 Assign 按钮 |

---

## TC-04: 业主划转电站 — 确认流程

| 项目 | 内容 |
|---|---|
| **前置条件** | 以业主身份登录 |
| **操作步骤** | 1. 在 st_04（Adelaide Storage A，当前未分配）卡片上，选择下拉框选 "Operator A" 2. 点击 "Assign" 按钮 3. 弹出 confirm 对话框，点击"确定" |
| **预期结果** | 弹出 Toast 提示"划转成功"；st_04 卡片的运维方显示更新为 op_a |
| **验证点** | stations 数组中 st_04.operator_id === 'op_a'；Toast 显示后 2 秒消失 |

---

## TC-05: 业主划转 — 取消操作

| 项目 | 内容 |
|---|---|
| **前置条件** | 以业主身份登录 |
| **操作步骤** | 1. 在任意电站卡片点击 Assign 2. confirm 对话框点击"取消" |
| **预期结果** | 无任何变化，operator_id 不变 |
| **验证点** | 数据未被修改 |

---

## TC-06: 划转后运维方验证

| 项目 | 内容 |
|---|---|
| **前置条件** | 已完成 TC-04（st_04 划转给 op_a） |
| **操作步骤** | 1. 返回 index.html 2. 点击"运维商A登录" |
| **预期结果** | 内容区显示 st_01、st_03、st_04 共 3 个电站 |
| **验证点** | st_04 出现在运维A的列表中 |

---

## TC-07: 业主端租约信息展示

| 项目 | 内容 |
|---|---|
| **前置条件** | 以业主身份登录 |
| **操作步骤** | 查看 st_01 卡片 |
| **预期结果** | 显示租约起止日期（2025-01-01 ~ 2028-12-31）、年费（A$850,000）、租约剩余天数 |
| **验证点** | 剩余天数计算正确；未分配电站（st_04）显示"-" |

---

## TC-08: 配色方案验证

| 项目 | 内容 |
|---|---|
| **前置条件** | 分别以业主和运维方登录 |
| **操作步骤** | 观察页面配色 |
| **预期结果** | 业主端：Slate 深蓝底 + Amber 强调色；运维端：深黑底 + Emerald 绿色强调 |
| **验证点** | 卡片、侧边栏、按钮颜色与规格一致 |

---

## TC-09: 响应式布局

| 项目 | 内容 |
|---|---|
| **前置条件** | 打开 dashboard.html |
| **操作步骤** | 缩小浏览器窗口至移动端宽度 |
| **预期结果** | 页面不出现横向滚动条，内容可正常浏览 |
| **验证点** | 侧边栏和卡片自适应 |

---

## TC-10: 页面刷新后状态

| 项目 | 内容 |
|---|---|
| **前置条件** | 以业主身份登录并完成划转 |
| **操作步骤** | 刷新 dashboard.html |
| **预期结果** | 角色保持（localStorage），但划转数据重置（内存数据丢失）|
| **验证点** | 这是已知限制（Demo 阶段），不算 Bug |
